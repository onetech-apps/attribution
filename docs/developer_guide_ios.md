# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è iOS —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Attribution System

## üìã –ó–º—ñ—Å—Ç

1. [–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ AppsFlyer](#1-–ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞-appsflyer)
2. [–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫—É](#2-—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è-–¥–æ–¥–∞—Ç–∫—É-–Ω–∞-—Å–µ—Ä–≤–µ—Ä—ñ)
3. [–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è SDK –≤ Xcode](#3-—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è-sdk-–≤-xcode)
4. [–ö–æ–¥ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó](#4-–∫–æ–¥-—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó)
5. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Keitaro –ø–æ—Å—Ç–±–µ–∫—ñ–≤](#5-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-keitaro-–ø–æ—Å—Ç–±–µ–∫—ñ–≤)
6. [–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#6-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
7. [–ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ App Store](#7-–ø—É–±–ª—ñ–∫–∞—Ü—ñ—è-–≤-app-store)

---

## 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ AppsFlyer

> ‚ö†Ô∏è –¶–µ–π –∫—Ä–æ–∫ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –¥–∂–µ—Ä–µ–ª–∞ —Ç—Ä–∞—Ñ—ñ–∫—É —á–µ—Ä–µ–∑ AppsFlyer (Moloco, Unity, TikTok). –î–ª—è Facebook-only –∫–∞–º–ø–∞–Ω—ñ–π –ø—Ä–æ–ø—É—Å—Ç—ñ—Ç—å —Ü–µ–π –∫—Ä–æ–∫.

### 1.1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ –≤ AppsFlyer

1. –£–≤—ñ–π—Ç–∏ –≤ [AppsFlyer Dashboard](https://hq1.appsflyer.com/)
2. **Add app** ‚Üí –≤–∏–±—Ä–∞—Ç–∏ iOS
3. –ó–∞–ø–æ–≤–Ω–∏—Ç–∏:
   - **App name** ‚Äî –Ω–∞–∑–≤–∞ –¥–æ–¥–∞—Ç–∫—É
   - **Apple App ID** ‚Äî –∑ App Store Connect (—Ç—ñ–ª—å–∫–∏ —Ü–∏—Ñ—Ä–∏, –±–µ–∑ `id`)
   - **Bundle ID** ‚Äî `com.company.appname`
4. –ó–±–µ—Ä–µ–≥—Ç–∏

### 1.2. –û—Ç—Ä–∏–º–∞—Ç–∏ Dev Key

1. **Settings** ‚Üí **App Settings**
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ **Dev Key** (–≤–∏–≥–ª—è–¥–∞—î —è–∫: `7R2968hheRdionPZ6xi255`)
3. –ó–±–µ—Ä–µ–≥—Ç–∏ ‚Äî –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–ª—è SDK

### 1.3. –î–æ–¥–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó (media sources)

1. **Integrated Partners** ‚Üí —à—É–∫–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–µ –¥–∂–µ—Ä–µ–ª–æ:
   - **Moloco** ‚Äî —É–≤—ñ–º–∫–Ω—É—Ç–∏, –≤–∫–∞–∑–∞—Ç–∏ API key
   - **Unity Ads** ‚Äî —É–≤—ñ–º–∫–Ω—É—Ç–∏, –≤–∫–∞–∑–∞—Ç–∏ Game ID
   - **TikTok** ‚Äî —É–≤—ñ–º–∫–Ω—É—Ç–∏, –≤–∫–∞–∑–∞—Ç–∏ Pixel ID
2. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ ‚Äî —É–≤—ñ–º–∫–Ω—É—Ç–∏ **Install** —Ç–∞ **In-App Events**

### 1.4. –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ

–ó–∞–ø–∏—à—ñ—Ç—å:
- ‚úÖ **AppsFlyer Dev Key**: `_______________`
- ‚úÖ **Apple App ID**: `_______________`

---

## 2. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

### 2.1. –î–æ–¥–∞—Ç–∏ –¥–æ–º–µ–Ω –≤ Cloudflare

1. –£–≤—ñ–π—Ç–∏ –≤ [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. –í–∏–±—Ä–∞—Ç–∏ –¥–æ–º–µ–Ω (–∞–±–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π)
3. **DNS** ‚Üí –¥–æ–¥–∞—Ç–∏ A-–∑–∞–ø–∏—Å:
   - **Name**: `@`
   - **Content**: `89.167.63.233`
   - **Proxy**: ‚úÖ ON (–ø–æ–º–∞—Ä–∞–Ω—á–µ–≤–∞ —Ö–º–∞—Ä–∫–∞)
4. **SSL/TLS** ‚Üí –≤–∏–±—Ä–∞—Ç–∏ —Ä–µ–∂–∏–º **Flexible**

### 2.2. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ –≤ —Å–∏—Å—Ç–µ–º—ñ

1. –í—ñ–¥–∫—Ä–∏—Ç–∏: `https://oneapps.info/apps.html`
2. –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å: *(–æ—Ç—Ä–∏–º–∞—Ç–∏ —É –∞–¥–º—ñ–Ω–∞)*
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"–î–æ–¥–∞—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫"**
4. –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –ø–æ–ª—è:

| –ü–æ–ª–µ | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|------|------|---------|
| **–ù–∞–∑–≤–∞** | –ù–∞–∑–≤–∞ –ø—Ä—ñ–ª–µ–Ω–¥—ñ–Ω–≥–∞/–¥–æ–¥–∞—Ç–∫–∞ | `Casino Stars` |
| **–î–æ–º–µ–Ω** | –î–æ–º–µ–Ω –¥–ª—è —Ç—Ä–µ–∫—ñ–Ω–≥—É –∫–ª—ñ–∫—ñ–≤ | `casinostars.com` |
| **Bundle ID** | Bundle –∑ Xcode –ø—Ä–æ—î–∫—Ç—É | `com.company.casinostars` |
| **Team ID** | Apple Developer Team ID | `A1B2C3D4E5` |
| **API Key** | –ö–ª—é—á –¥–ª—è SDK (–ø—Ä–∏–¥—É–º–∞—Ç–∏) | `cs_api_key_2024` |
| **App Store URL** | –õ—ñ–Ω–∫ –Ω–∞ App Store | `https://apps.apple.com/app/id123456789` |
| **AppsFlyer Dev Key** | –ó –∫—Ä–æ–∫—É 1.2 (—è–∫—â–æ —î) | `7R2968hheRdionPZ6xi255` |

5. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"–ó–±–µ—Ä–µ–≥—Ç–∏"**

### 2.3. –î–∞–Ω—ñ –¥–ª—è SDK

–ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∑–∞–ø–∏—à—ñ—Ç—å:
- ‚úÖ **–î–æ–º–µ–Ω –ø—Ä—ñ–ª—É**: `https://casinostars.com`
- ‚úÖ **API Key**: `cs_api_key_2024`
- ‚úÖ **AppsFlyer Dev Key**: `7R2968hheRdionPZ6xi255` (—è–∫—â–æ —î)
- ‚úÖ **Apple App ID**: `123456789`

---

## 3. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è SDK –≤ Xcode

### 3.1. –î–æ–¥–∞—Ç–∏ –ø–∞–∫–µ—Ç

**–í–∞—Ä—ñ–∞–Ω—Ç A ‚Äî —á–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):**

1. Xcode ‚Üí **File** ‚Üí **Add Package Dependencies**
2. –í—Å—Ç–∞–≤–∏—Ç–∏ URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é: `https://github.com/–í–ê–®_–†–ï–ü–û/attribution-sdk-ios.git`
3. –í–∏–±—Ä–∞—Ç–∏ –≤–µ—Ä—Å—ñ—é ‚Üí **Add Package**

**–í–∞—Ä—ñ–∞–Ω—Ç B ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ:**

1. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–∞–ø–∫—É `attribution-sdk-ios` –≤ –ø—Ä–æ—î–∫—Ç
2. Xcode ‚Üí **File** ‚Üí **Add Package Dependencies**
3. –í–∏–±—Ä–∞—Ç–∏ **Add Local** ‚Üí –æ–±—Ä–∞—Ç–∏ –ø–∞–ø–∫—É SDK

### 3.2. –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤ Target

1. Xcode ‚Üí –≤–∞—à Target ‚Üí **General** ‚Üí **Frameworks, Libraries, and Embedded Content**
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **+** ‚Üí –¥–æ–¥–∞—Ç–∏ `AttributionSDK`

---

## 4. –ö–æ–¥ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### 4.1. –¢—ñ–ª—å–∫–∏ Facebook (–±–µ–∑ AppsFlyer)

```swift
import UIKit
import AttributionSDK

@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    
    var window: UIWindow?
    
    func application(_ application: UIApplication, 
                    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        
        // ============================================
        // ‚ö° –ó–ú–Ü–ù–ò–¢–ò –¶–Ü –ó–ù–ê–ß–ï–ù–ù–Ø –ù–ê –°–í–û–á:
        // ============================================
        AttributionSDK.configure(
            apiKey: "cs_api_key_2024",              // API Key –∑ –∫—Ä–æ–∫—É 2.2
            baseURL: "https://casinostars.com"       // –î–æ–º–µ–Ω –ø—Ä—ñ–ª—É –∑ –∫—Ä–æ–∫—É 2.1
        )
        
        // Attribution –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É
        if !UserDefaults.standard.bool(forKey: "attribution_completed") {
            fetchAttribution()
        }
        
        return true
    }
    
    func fetchAttribution() {
        AttributionSDK.shared.fetchAttribution { result in
            switch result {
            case .success(let attribution):
                print("‚úÖ Attribution: \(attribution.attributed ? "Paid" : "Organic")")
                print("   OS User Key: \(attribution.osUserKey)")
                
                // –í—ñ–¥–∫—Ä–∏—Ç–∏ Keitaro URL —è–∫—â–æ —î (—Ç—ñ–ª—å–∫–∏ –¥–ª—è paid —Ç—Ä–∞—Ñ—ñ–∫—É)
                if let finalURL = attribution.finalUrl {
                    DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {
                        if let url = URL(string: finalURL) {
                            UIApplication.shared.open(url)
                        }
                    }
                }
                
                // –ü–æ–∑–Ω–∞—á–∏—Ç–∏ —â–æ attribution –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω–æ
                UserDefaults.standard.set(true, forKey: "attribution_completed")
                
                // –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ OneSignal:
                // OneSignal.setExternalUserId(attribution.osUserKey)
                // OneSignal.sendTag("push_sub", value: attribution.pushSub)
                
            case .failure(let error):
                print("‚ùå Attribution error: \(error)")
                // –î–æ–¥–∞—Ç–æ–∫ –ø—Ä–æ–¥–æ–≤–∂—É—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ organic
            }
        }
    }
}
```

### 4.2. Facebook + AppsFlyer (–ø–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è)

```swift
import UIKit
import AttributionSDK

@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    
    var window: UIWindow?
    
    func application(_ application: UIApplication, 
                    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        
        // ============================================
        // ‚ö° –ó–ú–Ü–ù–ò–¢–ò –¶–Ü –ó–ù–ê–ß–ï–ù–ù–Ø –ù–ê –°–í–û–á:
        // ============================================
        AttributionSDK.configure(
            apiKey: "cs_api_key_2024",                  // API Key –∑ –∫—Ä–æ–∫—É 2.2
            baseURL: "https://casinostars.com",          // –î–æ–º–µ–Ω –ø—Ä—ñ–ª—É
            appsFlyerDevKey: "7R2968hheRdionPZ6xi255",  // AppsFlyer Dev Key –∑ –∫—Ä–æ–∫—É 1.2
            appleAppID: "123456789"                      // Apple App ID (—Ç—ñ–ª—å–∫–∏ —Ü–∏—Ñ—Ä–∏!)
        )
        
        // Callback –¥–ª—è AppsFlyer attribution
        AttributionSDK.shared.onAppsFlyerAttribution = { result in
            switch result {
            case .success(let attribution):
                print("‚úÖ AppsFlyer Attribution:")
                print("   OS User Key: \(attribution.osUserKey)")
                
                if let finalURL = attribution.finalUrl {
                    DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {
                        if let url = URL(string: finalURL) {
                            UIApplication.shared.open(url)
                        }
                    }
                }
                
                UserDefaults.standard.set(true, forKey: "attribution_completed")
                
            case .failure(let error):
                print("‚ùå AppsFlyer attribution failed: \(error)")
            }
        }
        
        // Facebook attribution –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É
        if !UserDefaults.standard.bool(forKey: "attribution_completed") {
            fetchAttribution()
        }
        
        return true
    }
    
    func applicationDidBecomeActive(_ application: UIApplication) {
        // –ó–∞–ø—É—Å–∫ AppsFlyer (–û–ë–û–í'–Ø–ó–ö–û–í–û –≤ didBecomeActive!)
        AttributionSDK.shared.startAppsFlyer()
    }
    
    func fetchAttribution() {
        AttributionSDK.shared.fetchAttribution { result in
            switch result {
            case .success(let attribution):
                print("‚úÖ Facebook Attribution:")
                print("   Attributed: \(attribution.attributed)")
                print("   OS User Key: \(attribution.osUserKey)")
                
                if let finalURL = attribution.finalUrl {
                    DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {
                        if let url = URL(string: finalURL) {
                            UIApplication.shared.open(url)
                        }
                    }
                }
                
                UserDefaults.standard.set(true, forKey: "attribution_completed")
                
            case .failure(let error):
                print("‚ùå Attribution error: \(error)")
            }
        }
    }
}
```

### 4.3. –©–æ –º—ñ–Ω—è—Ç–∏ –≤ –∫–æ–∂–Ω–æ–º—É –Ω–æ–≤–æ–º—É –¥–æ–¥–∞—Ç–∫—É

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–µ –≤–∑—è—Ç–∏ | –ü—Ä–∏–∫–ª–∞–¥ |
|----------|----------|---------|
| `apiKey` | –°—Ç–æ—Ä—ñ–Ω–∫–∞ "–î–æ–¥–∞—Ç–∫–∏" (apps.html) | `"cs_api_key_2024"` |
| `baseURL` | –î–æ–º–µ–Ω –ø—Ä—ñ–ª—É | `"https://casinostars.com"` |
| `appsFlyerDevKey` | AppsFlyer Dashboard | `"7R2968hheRdionPZ6xi255"` |
| `appleAppID` | App Store Connect | `"123456789"` |

> ‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û**: `baseURL` ‚Äî —Ü–µ –¥–æ–º–µ–Ω **–ø—Ä—ñ–ª—É** (—Ç–æ–±—Ç–æ –¥–æ–º–µ–Ω —è–∫–∏–π –±—É–≤ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π –≤ apps.html), –ù–ï –¥–æ–º–µ–Ω –¥–∞—à–±–æ—Ä–¥—É (`oneapps.info`).

---

## 5. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Keitaro –ø–æ—Å—Ç–±–µ–∫—ñ–≤

–í Keitaro –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ S2S –ø–æ—Å—Ç–±–µ–∫–∏ —è–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç—å –Ω–∞—à —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ –∫–æ–Ω–≤–µ—Ä—Å—ñ—ó.
–ù–∞—à —Å–µ—Ä–≤–µ—Ä –¥–∞–ª—ñ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å —ñ–≤–µ–Ω—Ç —É Facebook Conversion API –∞–±–æ AppsFlyer.

> ‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û**: –ú–∏ –ø–µ—Ä–µ–¥–∞—î–º–æ –Ω–∞—à `click_id` –≤ Keitaro —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `external_id` –≤ URL –∫–∞–º–ø–∞–Ω—ñ—ó. –¢–æ–º—É –≤ –ø–æ—Å—Ç–±–µ–∫–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–∞–∫—Ä–æ—Å **`{external_id}`**.

### 5.1. –í—Å—ñ –ø–æ—Å—Ç–±–µ–∫–∏ ‚Äî –∑–≤–µ–¥–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è

| –¢–∏–ø | Keitaro S2S Postback URL |
|-----|--------------------------|
| **Facebook Lead** | `https://oneapps.info/api/v1/postback?subid={external_id}&status=lead` |
| **Facebook Sale** | `https://oneapps.info/api/v1/postback?subid={external_id}&status=sale&amount={revenue}&currency={currency}` |
| **AppsFlyer Registration** | `https://oneapps.info/api/v1/postback/appsflyer?appsflyer_id={external_id}&idfv={sub5}&event=registration` |
| **AppsFlyer Deposit** | `https://oneapps.info/api/v1/postback/appsflyer?appsflyer_id={external_id}&idfv={sub5}&event=deposit&amount={revenue}&currency={currency}` |

> –í—Å—ñ `{...}` ‚Äî —Ü–µ –º–∞–∫—Ä–æ—Å–∏ Keitaro, —è–∫—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è.

### 5.2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Keitaro (Facebook)

1. –ó–∞–π—Ç–∏ –≤ **–ö–∞–º–ø–∞–Ω—ñ—é** ‚Üí **Postback URLs**
2. –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç–±–µ–∫ –¥–ª—è **Lead**:

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|------|----------|
| **URL** | `https://oneapps.info/api/v1/postback?subid={external_id}&status=lead` |
| **Event** | Lead / Registration |
| **Method** | GET |

3. –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç–±–µ–∫ –¥–ª—è **Sale** (–∑ —Ä–µ–≤–µ–Ω—é):

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|------|----------|
| **URL** | `https://oneapps.info/api/v1/postback?subid={external_id}&status=sale&amount={revenue}&currency={currency}` |
| **Event** | Sale / Purchase |
| **Method** | GET |

### 5.3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Keitaro (AppsFlyer)

1. –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç–±–µ–∫ –¥–ª—è **Registration**:

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|------|----------|
| **URL** | `https://oneapps.info/api/v1/postback/appsflyer?appsflyer_id={external_id}&idfv={sub5}&event=registration` |
| **Event** | Registration |
| **Method** | GET |

2. –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç–±–µ–∫ –¥–ª—è **Deposit** (–∑ —Ä–µ–≤–µ–Ω—é):

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|------|----------|
| **URL** | `https://oneapps.info/api/v1/postback/appsflyer?appsflyer_id={external_id}&idfv={sub5}&event=deposit&amount={revenue}&currency={currency}` |
| **Event** | Deposit |
| **Method** | GET |

### 5.4. –û–ø–∏—Å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –©–æ –ø–µ—Ä–µ–¥–∞—î | –ó–≤—ñ–¥–∫–∏ –æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è |
|----------|------------|-------------------|
| `subid` / `appsflyer_id` | –ù–∞—à click_id –∞–±–æ AppsFlyer ID | Keitaro –º–∞–∫—Ä–æ—Å `{external_id}` |
| `status` | –¢–∏–ø –∫–æ–Ω–≤–µ—Ä—Å—ñ—ó: `lead` –∞–±–æ `sale` | –í—Ä—É—á–Ω—É –≤–∫–∞–∑—É—î—Ç—å—Å—è |
| `event` | –¢–∏–ø AppsFlyer: `registration` –∞–±–æ `deposit` | –í—Ä—É—á–Ω—É –≤–∫–∞–∑—É—î—Ç—å—Å—è |
| `amount` | –°—É–º–∞ —Ä–µ–≤–µ–Ω—é | Keitaro –º–∞–∫—Ä–æ—Å `{revenue}` |
| `currency` | –í–∞–ª—é—Ç–∞ (USD, EUR —Ç–æ—â–æ) | Keitaro –º–∞–∫—Ä–æ—Å `{currency}` |
| `idfv` | IDFV –ø—Ä–∏—Å—Ç—Ä–æ—é (–¥–ª—è AppsFlyer) | Keitaro –º–∞–∫—Ä–æ—Å `{sub5}` |

### 5.4. URL –¥–ª—è —Ä–µ–∫–ª–∞–º–∏ (Facebook)

–¢—Ä–µ–∫—ñ–Ω–≥-–ª—ñ–Ω–∫ –¥–ª—è Facebook —Ä–µ–∫–ª–∞–º–∏:

```
https://–î–û–ú–ï–ù_–ü–†–Ü–õ–£/t?sub1=BUYER_ID&sub2=GEO&sub3=CREATIVE&sub4=OFFER&sub5=CUSTOM&fb_id=PIXEL_ID&fb_token=ACCESS_TOKEN
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```
https://casinostars.com/t?sub1=buyer_ivan&sub2=UA&sub3=creative_v2&sub4=casino_stars&fbclid={{fbclid}}&adsetid={{adset.id}}&fb_id=598428619877262&fb_token=EAAG...
```

> `{{fbclid}}` —ñ `{{adset.id}}` ‚Äî —Ü–µ –º–∞–∫—Ä–æ—Å–∏ Facebook, –≤–æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è.

---

## 6. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 6.1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–º–µ–Ω—É

–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
https://–î–û–ú–ï–ù_–ü–†–Ü–õ–£/health
```
–ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏: `{"status":"ok"}`

### 6.2. –¢–µ—Å—Ç–æ–≤–∏–π –∫–ª—ñ–∫

```bash
curl "https://–î–û–ú–ï–ù_–ü–†–Ü–õ–£/t?sub1=test_buyer&sub2=UA&sub3=test_creative"
```
–ú–∞—î –∑—Ä–æ–±–∏—Ç–∏ —Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ App Store URL.

### 6.3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –¥–∞—à–±–æ—Ä–¥

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ `https://oneapps.info/testing.html`
2. –í–∫–ª–∞–¥–∫–∞ **"–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è"** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç—Ä–µ–∫—ñ–Ω–≥-–ª—ñ–Ω–∫
3. –í–∫–ª–∞–¥–∫–∞ **"–°–∏–º—É–ª—è—Ç–æ—Ä"** ‚Äî –ø—Ä–æ–π—Ç–∏ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª attribution
4. –í–∫–ª–∞–¥–∫–∞ **"–†—É—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏"** ‚Äî —Ç–µ—Å—Ç –ø–æ—Å—Ç–±–µ–∫—ñ–≤

### 6.4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –¥–∞—à–±–æ—Ä–¥—ñ

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ `https://oneapps.info/dashboard.html`
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ç–µ—Å—Ç–æ–≤–∏–π –∫–ª—ñ–∫ –∑ º—è–≤–∏–≤—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ñ "–ö–ª—ñ–∫–∏"
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ attribution –≤ —Ç–∞–±–ª–∏—Ü—ñ "–ê—Ç—Ä–∏–±—É—Ü—ñ—ó"

---

## 7. –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ App Store

### –ß–µ–∫–ª—ñ—Å—Ç –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –Ω–∞ —Ä–µ–≤—å—é:

- [ ] SDK –¥–æ–¥–∞–Ω–æ –≤ –ø—Ä–æ—î–∫—Ç
- [ ] `apiKey`, `baseURL` –≤–∫–∞–∑—É—é—Ç—å –Ω–∞ **production** –¥–æ–º–µ–Ω –ø—Ä—ñ–ª—É
- [ ] `appsFlyerDevKey` —ñ `appleAppID` –≤–∫–∞–∑–∞–Ω—ñ (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è AppsFlyer)
- [ ] –î–æ–º–µ–Ω –ø—Ä—ñ–ª—É –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π –≤ `apps.html`
- [ ] DNS A-–∑–∞–ø–∏—Å –≤ Cloudflare —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑ –ø—Ä–æ–∫—Å—ñ ON
- [ ] `https://–î–û–ú–ï–ù_–ü–†–Ü–õ–£/health` –ø–æ–≤–µ—Ä—Ç–∞—î `{"status":"ok"}`
- [ ] –ü–æ—Å—Ç–±–µ–∫–∏ –≤ Keitaro –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –Ω–∞ `https://oneapps.info/api/v1/postback?...`
- [ ] –¢–µ—Å—Ç–æ–≤–∏–π –∫–ª—ñ–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–æ
- [ ] Attribution –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ

### –ü–æ—Ä—è–¥–æ–∫ –¥—ñ–π:

1. ‚úÖ –ó—Ä–æ–±–∏—Ç–∏ –≤—Å—ñ –∫—Ä–æ–∫–∏ 1-6 –≤–∏—â–µ
2. ‚úÖ –ó–±—ñ–ª–¥–∏—Ç–∏ Archive –≤ Xcode
3. ‚úÖ –ó–∞–ª–∏—Ç–∏ –≤ App Store Connect
4. ‚úÖ –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –Ω–∞ —Ä–µ–≤—å—é
5. ‚è≥ –î–æ—á–µ–∫–∞—Ç–∏—Å—å –∞–ø–ø—Ä—É–≤–∞
6. ‚úÖ –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∫–∞–º–ø–∞–Ω—ñ—é –≤ Facebook/AppsFlyer

---

## ‚ùì FAQ

**Q: –©–æ —è–∫—â–æ attribution –Ω–µ –∑–Ω–∞–π—à–ª–∞ matching click?**
A: SDK –ø–æ–≤–µ—Ä–Ω–µ `attributed: false`, `pushSub: "organic"`, —ñ `finalUrl: null`. –î–æ–¥–∞—Ç–æ–∫ –ø—Ä–∞—Ü—é—î —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π organic install.

**Q: –°–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –¥—ñ–π—Å–Ω–∏–π –∫–ª—ñ–∫ –¥–ª—è attribution?**
A: 24 –≥–æ–¥–∏–Ω–∏. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–ª—ñ–∫ –≤–≤–∞–∂–∞—î—Ç—å—Å—è –ø—Ä–æ—Ç—É—Ö—à–∏–º.

**Q: –ß–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω AppsFlyer –¥–ª—è Facebook –∫–∞–º–ø–∞–Ω—ñ–π?**
A: –ù—ñ. Facebook attribution –ø—Ä–∞—Ü—é—î –ø–æ–≤–Ω—ñ—Å—Ç—é —á–µ—Ä–µ–∑ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä (IP matching). AppsFlyer –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ç—ñ–ª—å–∫–∏ –¥–ª—è Moloco, Unity, TikTok.

**Q: –î–µ –¥–∏–≤–∏—Ç–∏—Å—å –∫–æ–Ω–≤–µ—Ä—Å—ñ—ó?**
A: –í –¥–∞—à–±–æ—Ä–¥—ñ `https://oneapps.info/dashboard.html` ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–õ–æ–≥–∏".

**Q: –Ø–∫ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å –¥–∞—à–±–æ—Ä–¥—É?**
A: –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ñ–∞–π–ª `public/auth.js` –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ, –∑–º—ñ–Ω–Ω–∞ `ADMIN_PASSWORD`.
